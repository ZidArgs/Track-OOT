function convertOldLogic(e){var t={type:"or",el:[]};for(let c=0;c<e.length;++c){var n={type:"and",el:[]};for(let t=0;t<e[c].length;++t){var a={el:null},o=a,i=e[c][t];i.startsWith("!")&&(i=i.slice(1),o.el={type:"not",el:null},o=o.el);var[l,r]=i.split(":");r&&(o.el={type:"min",value:r,el:null},o=o.el),l=l.split("."),o.el={type:l[0].slice(0,-1),el:l[1]},n.el.push(a.el)}t.el.push(n)}return t}function exportLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=document.getElementById("output-panel").querySelector(".panel-body"),n={};n[e.getAttribute("data-cat")]={},n[e.getAttribute("data-cat")][e.getAttribute("data-id")]=getLogic(),t.innerHTML=JSON.stringify(n," ",4)}function setLogic(e){return removeLogicEl(document.getElementById("editor-panel").querySelector(CHILD_ITEM_QUERY)),recursiveSetLogic(e,document.getElementById("editor-panel").querySelector(".panel-body > .placeholder"))}function recursiveSetLogic(e,t){if(null!=e)switch(e.type){case"and":a=addLogicEl(document.getElementById("logic-and"),t).querySelector(".placeholder");for(let t=0;t<e.el.length;++t){(n=e.el[t])&&null!=n&&recursiveSetLogic(n,a)}break;case"or":a=addLogicEl(document.getElementById("logic-or"),t).querySelector(".placeholder");for(let t=0;t<e.el.length;++t){var n=e.el[t];n&&null!=n&&recursiveSetLogic(n,a)}break;case"not":a=addLogicEl(document.getElementById("logic-not"),t).querySelector(".placeholder");e.el&&null!=e.el&&recursiveSetLogic(e.el,a);break;case"equal":(a=addLogicEl(document.getElementById("logic-equal"),t)).querySelector("input").value=e.value,a=a.querySelector(".placeholder"),e.el&&null!=e.el&&recursiveSetLogic(e.el,a);break;case"value":case"min":(a=addLogicEl(document.getElementById("logic-min"),t)).querySelector("input").value=e.value,a=a.querySelector(".placeholder"),e.el&&null!=e.el&&recursiveSetLogic(e.el,a);break;case"mixin":e.el&&null!=e.el&&addLogicEl(document.getElementById("mixin_"+e.el),t);break;case"skip":if(e.el&&null!=e.el){a=addLogicEl(document.getElementById("skip_"+e.el),t);e.hasOwnProperty("value")&&(a.querySelector("select").value=e.value)}break;case"setting":case"option":if(e.el&&null!=e.el){var a=addLogicEl(document.getElementById("option_"+e.el),t);e.hasOwnProperty("value")&&(a.querySelector("select").value=e.value)}break;case"item":e.el&&null!=e.el&&addLogicEl(document.getElementById("item_"+e.el),t)}}function getLogic(){return recursiveGetLogic(document.getElementById("editor-panel").querySelector(CHILD_ITEM_QUERY))}function recursiveGetLogic(e){if(!e||null==e)return null;switch(e.getAttribute("data-id")){case null:case"":return null;case"logic-and":t={type:"and",el:[]};return(n=Array.from(e.querySelectorAll(CHILD_ITEM_QUERY_SCOPE))).forEach(e=>{t.el.push(recursiveGetLogic(e))}),t;case"logic-or":var t={type:"or",el:[]},n=Array.from(e.querySelectorAll(CHILD_ITEM_QUERY_SCOPE));return n.forEach(e=>{t.el.push(recursiveGetLogic(e))}),t;case"logic-not":return{type:"not",el:recursiveGetLogic(a=e.querySelector(CHILD_ITEM_QUERY_SCOPE))};case"logic-equal":return{type:"equal",el:recursiveGetLogic(a=e.querySelector(CHILD_ITEM_QUERY_SCOPE)),value:parseInt(e.querySelector("input").value)};case"logic-min":var a=e.querySelector(CHILD_ITEM_QUERY_SCOPE);return{type:"min",el:recursiveGetLogic(a),value:parseInt(e.querySelector("input").value)};default:return e.classList.contains("logic-mixin")?{type:"mixin",el:e.getAttribute("data-id").slice(6)}:e.classList.contains("logic-option")?e.classList.contains("logic-choice")?{type:"option",el:e.getAttribute("data-id").slice(7),value:e.querySelector("select").value}:{type:"option",el:e.getAttribute("data-id").slice(7)}:e.classList.contains("logic-skip")?e.classList.contains("logic-choice")?{type:"skip",el:e.getAttribute("data-id").slice(5),value:e.querySelector("select").value}:{type:"skip",el:e.getAttribute("data-id").slice(5)}:e.classList.contains("logic-item")?{type:"item",el:e.getAttribute("data-id").slice(5)}:null}}function moveLogicEl(e,t,n){var a=t.parentElement;if(n)e=cloneLogicEl(e);else{var o=e.parentElement;o.classList.contains("multiple-children")||(o.querySelector(":scope > .placeholder").style.display="")}return a.insertBefore(e,t),a.classList.contains("multiple-children")||(t.style.display="none"),e}function cloneLogicEl(e){var t=e.cloneNode();if(!t.nodeName.startsWith("#")){t.classList.contains("logic-operator")?(t.id="logic_onboard_"+ID_CNT++,t.ondragstart=dragNewElement,t.onmouseover=elementMouseOver,t.onmouseout=elementMouseOut,t.ondragover=elementMouseOver):t.classList.contains("logic-element")?(t.id="logic_onboard_"+ID_CNT++,t.ondragstart=dragNewElement):t.classList.contains("placeholder")?(t.ondrop=dropOnPlaceholder,t.ondragover=allowDrop):"INPUT"!=t.tagName&&"SELECT"!=t.tagName||(t.onchange=exportLogic);var n=Array.from(e.childNodes);if(n)for(let e in n)t.appendChild(cloneLogicEl(n[e]));"SELECT"==t.tagName&&(t.value=e.value)}return t}function addLogicEl(e,t){(e=e.cloneNode(!0)).setAttribute("data-id",e.id),e.id="logic_onboard_"+ID_CNT++,e.ondragstart=dragNewElement;var n=t.parentElement,a=e.querySelector(".placeholder");a&&(a.ondrop=dropOnPlaceholder,a.ondragover=allowDrop),n.classList.contains("multiple-children")||(t.style.display="none"),e.classList.contains("logic-operator")&&(e.onmouseover=elementMouseOver,e.onmouseout=elementMouseOut,e.ondragover=elementMouseOver);var o=e.querySelector("input, select");return o&&(o.onchange=exportLogic,o.removeAttribute("disabled")),n.insertBefore(e,t),e}function removeLogicEl(e){if(e&&null!=e){if(e.id.startsWith("logic_onboard_")){var t=e.parentElement;t.removeChild(e),t.classList.contains("multiple-children")||(t.querySelector(".placeholder").style.display="")}return e}}async function loadAll(){var e=await FileLoader.loadAllJSON(["database/items.json","database/chests.json","database/dungeons.json","database/skulltulas.json","database/logic.json","database/rom_options.json","database/lang_en.json"]),t={};return t.items=e[0],t.chests=e[1],t.dungeons=e[2],t.skulltulas=e[3],t.logic=e[4],t.logic_patched=Storage.get("settings","logic",{}),t.rom_options=e[5],t.lang=e[6],t}function createListItem(e,t){var n=document.createElement("div");return n.className="list-item",n.innerHTML=translate(t),n.id=e+"_"+t,n.setAttribute("title",t),n.onclick=new Function("loadLogic('"+e+"', '"+t+"')"),data.logic_patched.hasOwnProperty(e)&&data.logic_patched[e].hasOwnProperty(t)&&n.classList.add("has-custom-logic"),n}function createElement(e,t){var n=document.createElement("div");return n.className="logic-element logic-"+e,n.id=e+"_"+t,n.innerHTML=translate(t),n.setAttribute("title",t),n.setAttribute("draggable",!0),n.ondragstart=dragNewElement,n}function createOption(e,t,n){var a=createElement(e,t);if("choice"==n.type){a.classList.add("logic-choice");var o=document.createElement("select");o.setAttribute("disabled","true");for(let e in n.values){var i=document.createElement("option");i.innerHTML=translate(n.values[e]),i.setAttribute("value",n.values[e]),o.appendChild(i)}o.value=n.default,a.appendChild(o)}return a}function createPanel(e,t){var n=document.createElement("div");n.className="panel panel-group collapsible";var a=document.createElement("div");a.className="panel-header",a.innerHTML=e,a.onclick=function(e){e.currentTarget.parentElement.classList.toggle("expanded")},n.appendChild(a);var o=document.createElement("div");return o.className="panel-body",n.appendChild(o),t.appendChild(n),o}async function createMixin(e){var t=await Dialog.prompt("New mixin","Please enter a new name!");if(!1!==t){if(""==t)return await Dialog.alert("Warning","The name can not be empty."),void state_New();if(t=t.toLowerCase().replace(/ /g,"_"),data.logic.mixins.hasOwnProperty(t))return await Dialog.alert("Warning","The name already exists."),void state_New();data.logic.mixins[t]=null;var n=document.createElement("div");n.className="list-item",n.innerHTML=translate(t),n.id="mixins_"+t,n.setAttribute("title",t),n.onclick=new Function("loadLogic('mixins', '"+t+"')"),n.classList.add("has-new-logic"),mixins_panel.insertBefore(n,create_mixin_button),mixin_panel.appendChild(createElement("mixin",t))}}function fillEditor(){chest_panel=createPanel("Chests - Reachable Logic",logics_panel),skulltula_panel=createPanel("Skulltulas - Reachable Logic",logics_panel),dungeon_panel=createPanel("Dungeons - Beatable Logic",logics_panel),mixins_panel=createPanel("Mixins",logics_panel),item_panel=createPanel("Items",elements_panel),skips_panel=createPanel("Skips",elements_panel),options_panel=createPanel("Options",elements_panel),mixin_panel=createPanel("Mixins",elements_panel),document.getElementById("operator-panel").querySelector(".panel-header").onclick=function(e){e.currentTarget.parentElement.classList.toggle("expanded")};var e=createPanel("Overworld",chest_panel);for(let t in data.chests)e.appendChild(createListItem("chests",t));Object.keys(data.chests).length||(e.innerHTML="<i>No Elements</i>");var t=createPanel("Overworld",skulltula_panel);for(let e in data.skulltulas)t.appendChild(createListItem("skulltulas",e));Object.keys(data.skulltulas).length||(t.innerHTML="<i>No Elements</i>");for(let e in data.dungeons){dungeon_panel.appendChild(createListItem("dungeons",e));var n=data.dungeons[e].chests,a=data.dungeons[e].skulltulas,o=createPanel(translate(e),chest_panel),i=createPanel(translate(e),skulltula_panel);for(let e in n){l=createListItem("chests",e);o.appendChild(l)}Object.keys(n).length||(o.innerHTML="<i>No Elements</i>");for(let e in a){l=createListItem("skulltulas",e);i.appendChild(l)}Object.keys(a).length||(i.innerHTML="<i>No Elements</i>")}Object.keys(data.dungeons).length||(dungeon_panel.innerHTML="<i>No Elements</i>");for(let e in data.logic.mixins)mixins_panel.appendChild(createListItem("mixins",e)),mixin_panel.appendChild(createElement("mixin",e));(create_mixin_button=document.createElement("div")).className="list-item",create_mixin_button.innerHTML="NEW MIXIN",create_mixin_button.onclick=createMixin,mixins_panel.appendChild(create_mixin_button);for(let e in data.logic_patched.mixins)if(void 0===data.logic.mixins[e]){var l;(l=document.createElement("div")).className="list-item",l.innerHTML=translate(e),l.id="mixins_"+e,l.setAttribute("title",e),l.onclick=new Function("loadLogic('mixins', '"+e+"')"),l.classList.add("has-new-logic"),mixins_panel.insertBefore(l,create_mixin_button),mixin_panel.appendChild(createElement("mixin",e))}for(let e in data.items)item_panel.appendChild(createElement("item",e));for(let e in data.rom_options.options)options_panel.appendChild(createOption("option",e,data.rom_options.options[e]));for(let e in data.rom_options.skips)skips_panel.appendChild(createOption("skip",e,data.rom_options.skips[e]))}async function loadLogic(e,t){var n=document.getElementById("editor-panel").querySelector(".panel-header");n.getAttribute("data-cat")&&document.getElementById(n.getAttribute("data-cat")+"_"+n.getAttribute("data-id")).classList.remove("active"),n.setAttribute("data-cat",e),n.setAttribute("data-id",t);var a=null;data.logic_patched.hasOwnProperty(e)&&data.logic_patched[e].hasOwnProperty(t)?(a=data.logic_patched[e][t],n.innerHTML=translate(t)+" (local)"):(a=data.logic[e][t],n.innerHTML=translate(t)+" (remote)",Array.isArray(a)&&(a=convertOldLogic(a))),document.getElementById(e+"_"+t).classList.add("active"),setLogic(a),exportLogic()}async function loadRemoteLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),n=e.getAttribute("data-id");if(t&&n){var a=data.logic[t][n];e.innerHTML=translate(n)+" (remote)",Array.isArray(a)&&(a=convertOldLogic(a)),setLogic(a),exportLogic()}}async function loadLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),n=e.getAttribute("data-id");if(t&&n){var a=null;data.logic_patched.hasOwnProperty(t)&&data.logic_patched[t].hasOwnProperty(n)&&(a=data.logic_patched[t][n]),e.innerHTML=translate(n)+" (local)",setLogic(a),exportLogic()}}async function saveLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),n=e.getAttribute("data-id");t&&n&&(data.logic_patched[t]=data.logic_patched[t]||{},data.logic_patched[t][n]=getLogic(),document.getElementById(t+"_"+n).classList.add("has-custom-logic"),Storage.set("settings","logic",data.logic_patched),e.innerHTML=translate(n)+" (local)",await Dialog.alert("Success",'Logic "'+translate(n)+'" saved.'))}async function removeLocalLogic(){var e=document.getElementById("editor-panel").querySelector(".panel-header"),t=e.getAttribute("data-cat"),n=e.getAttribute("data-id");t&&n&&data.logic_patched.hasOwnProperty(t)&&data.logic_patched[t].hasOwnProperty(n)&&await Dialog.confirm("Warning",'Do you really want to remove "'+translate(n)+'"?')&&(delete data.logic_patched[t][n],Storage.set("settings","logic",data.logic_patched),document.getElementById(t+"_"+n).classList.remove("has-custom-logic"),loadRemoteLogic(),await Dialog.alert("Success",'Logic "'+translate(n)+'" removed.'))}async function clearLocalLogic(){if(await Dialog.confirm("Warning","Do you really want to remove all local logic?")){for(let e in data.logic_patched)for(let t in data.logic_patched[e])document.getElementById(e+"_"+t).classList.remove("has-custom-logic");data.logic_patched={},Storage.set("settings","logic",data.logic_patched),loadRemoteLogic(),await Dialog.alert("Success","Local logic removed.")}}async function downloadLogicPatch(){FileSystem.save(JSON.stringify(data.logic_patched," ",4),"logic_patch_"+Date.now()+".json")}async function uploadLogicPatch(){FileSystem.load().then(function(e){e.startsWith("data:application/json;base64,")&&(e=e.slice(29));var t=JSON.parse(atob(e));for(let e in t){data.logic_patched[e]=data.logic_patched[e]||{};for(let a in t[e])if(data.logic_patched[e][a]=t[e][a],"mixins"!=e||data.logic.mixins.hasOwnProperty(a))document.getElementById(e+"_"+a).classList.add("has-custom-logic");else{data.logic.mixins[a]=null;var n=document.createElement("div");n.className="list-item",n.innerHTML=translate(a),n.id="mixins_"+a,n.setAttribute("title",a),n.onclick=new Function("loadLogic('mixins', '"+a+"')"),n.classList.add("has-new-logic"),mixins_panel.insertBefore(n,create_mixin_button),mixin_panel.appendChild(createElement("mixin",a))}}Storage.set("settings","logic",data.logic_patched)})}async function downloadPatchedLogic(){var e=JSON.parse(JSON.stringify(data.logic));for(let t in data.logic_patched){e[t]=e[t]||{};for(let n in data.logic_patched[t])e[t][n]=data.logic_patched[t][n]}FileSystem.save(JSON.stringify(e," ",4),"logic.json")}function debug(){document.getElementById("editor-frame").classList.toggle("debug-mode")}async function run(){window.data=await loadAll(),window.oncontextmenu=function(e){return e.preventDefault(),!1},fillEditor(),document.getElementById("control-save-local").onclick=saveLocalLogic,document.getElementById("control-load-local").onclick=loadLocalLogic,document.getElementById("control-remove-local").onclick=removeLocalLogic,document.getElementById("control-clear-local").onclick=clearLocalLogic,document.getElementById("control-download-patch").onclick=downloadLogicPatch,document.getElementById("control-upload-patch").onclick=uploadLogicPatch,document.getElementById("control-download-patched").onclick=downloadPatchedLogic,document.getElementById("control-load-remote").onclick=loadRemoteLogic}function translate(e){return data.lang[e]?data.lang[e]:e}function allowDrop(e){e.preventDefault(),e.stopPropagation()}function dragNewElement(e){e.dataTransfer.setData("text",e.target.id)}function dropOnPlaceholder(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.getData("text"),n=document.getElementById(t);t.startsWith("logic_onboard_")?moveLogicEl(n,e.target,e.ctrlKey):addLogicEl(n,e.target),exportLogic()}function deleteElement(e){removeLogicEl(document.getElementById(e.dataTransfer.getData("text"))),exportLogic()}function elementMouseOver(e){var t=document.querySelector(".logic-operator.hover");t&&t.classList.remove("hover"),e.currentTarget.classList.add("hover"),e.stopPropagation()}function elementMouseOut(e){e.currentTarget.classList.contains("hover")&&(e.currentTarget.classList.remove("hover"),e.stopPropagation())}window.FileSystem=new function(){var e=document.createElement("a");e.style="display: none";var t=document.createElement("input");t.setAttribute("type","file"),t.style="display: none",this.load=function(){return new Promise(function(e,n){t.onchange=function(){var t=this.files[0],a=new FileReader;a.onload=function(t){e(t.target.result)},a.onabort=e,a.onerror=n,a.readAsDataURL(t)},t.onerror=n,t.click()})},this.save=function(t,n){var a=window.URL.createObjectURL(new Blob([t],{type:"octet/stream"}));e.href=a,e.download=n,e.click(),window.URL.revokeObjectURL(a)}},window.FileLoader=new function(){var e=0,t=0;this.onupdate=null,this.addFont=function(n,a,o="normal",i=400){e++,"function"==typeof this.onupdate&&this.onupdate(e,t);var l=new FontFace(n,"url("+a+")",{style:o,weight:i});return document.fonts.add(l),l.loaded.then(function(n){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),n}.bind(this))},this.loadText=function(n){return e++,"function"==typeof this.onupdate&&this.onupdate(e,t),fetch(new Request(n,{method:"GET",headers:new Headers({"Content-Type":"text/plain",Pragma:"no-cache","Cache-Control":"no-cache"}),mode:"cors",cache:"default"})).then(function(n){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),n.text()}.bind(this))},this.loadAllText=function(e){var t=[];for(let n in e)t.push(this.loadText(e[n]));return Promise.all(t)},this.loadJSON=function(n){return e++,"function"==typeof this.onupdate&&this.onupdate(e,t),fetch(new Request(n,{method:"GET",headers:new Headers({"Content-Type":"application/json",Pragma:"no-cache","Cache-Control":"no-cache"}),mode:"cors",cache:"default"})).then(function(n){return t++,"function"==typeof this.onupdate&&this.onupdate(e,t),n.json()}.bind(this))},this.loadAllJSON=function(e){var t=[];for(let n in e)t.push(this.loadJSON(e[n]));return Promise.all(t)}},window.Storage=new function(){this.set=function(e,t,n){localStorage.setItem(e+"\0"+t,JSON.stringify(n))},this.get=function(e,t,n=null){try{var a=localStorage.getItem(e+"\0"+t);return a&&null!=a?JSON.parse(a):n}catch(e){return n}},this.has=function(e,t){return localStorage.hasOwnProperty(e+"\0"+t)},this.remove=function(e,t){localStorage.removeItem(e+"\0"+t)},this.categories=function(){var e=Object.keys(localStorage);return Array.from(new Set(e.map(function(e){return e.split("\0")[0]})))},this.names=function(e){var t=Object.keys(localStorage);return Array.from(new Set(t.filter(function(t){return t.startsWith(e+"\0")}).map(function(e){return e.split("\0")[1]})))}},function(){function e(){var e="dialog_"+ ++n,t={container:document.createElement("DIV"),window:document.createElement("DIV"),focusCT:document.createElement("DIV"),focusCB:document.createElement("DIV"),title:document.createElement("DIV"),text:document.createElement("DIV"),body:document.createElement("DIV"),footer:document.createElement("DIV"),submit:document.createElement("BUTTON"),abort:document.createElement("BUTTON"),close:document.createElement("button")};return t.close.className="dialog-close",t.close.setAttribute("title","close"),t.submit.className="hidden",t.submit.setAttribute("type","submit"),t.abort.className="hidden",t.abort.setAttribute("type","reset"),t.title.id=e+"_title",t.title.className="dialog-title hidden",t.text.id=e+"_text",t.text.className="dialog-text hidden",t.body.className="dialog-body",t.body.appendChild(t.text),t.footer.className="dialog-footer",t.footer.appendChild(t.submit),t.footer.appendChild(t.abort),t.focusCT.setAttribute("tabindex","0"),t.focusCB.setAttribute("tabindex","0"),t.window.className="dialog-window",t.window.id=e,t.window.setAttribute("role","dialog"),t.window.setAttribute("aria-modal","true"),t.window.appendChild(t.title),t.window.appendChild(t.body),t.window.appendChild(t.footer),t.window.appendChild(t.close),t.container.className="dialog",t.container.appendChild(t.focusCT),t.container.appendChild(t.window),t.container.appendChild(t.focusCB),t}const t=['button:not([tabindex="-1"])','[href]:not([tabindex="-1"])','input:not([tabindex="-1"])','select:not([tabindex="-1"])','textarea:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(",");var n=0;window.Dialog=function(n,a){function o(e){"function"==typeof n&&n(!!e),document.body.removeChild(i.container),a&&a.focus()}var i=e(),l=[];i.focusCT.onfocus=function(){l.length&&l[l.length-1].focus()},i.focusCB.onfocus=function(){l.length&&l[0].focus()},i.container.onkeydown=function(e){27==(e.which||e.keyCode)&&o(),e.stopPropagation()},i.submit.onclick=function(){o(!0)},i.abort.onclick=function(){o()},i.close.onclick=function(){o()},this.setTitle=function(e){return void 0===e?(i.title.classList.add("hidden"),target.removeAttribute("aria-labelledby")):(i.title.classList.remove("hidden"),i.title.innerHTML=e,i.window.setAttribute("aria-labelledby",i.title.id)),this},this.setText=function(e){return void 0===e?(i.text.classList.add("hidden"),target.removeAttribute("aria-describedby")):(i.text.classList.remove("hidden"),i.text.innerHTML=e,i.window.setAttribute("aria-describedby",i.text.id)),this},this.setSubmitText=function(e){return i.submit.classList.remove("hidden"),i.submit.innerHTML=e.toUpperCase(),i.submit.setAttribute("title",e),l=Array.from(i.window.querySelectorAll(t)),this},this.setAbortText=function(e){return i.abort.classList.remove("hidden"),i.abort.innerHTML=e.toUpperCase(),i.abort.setAttribute("title",e),l=Array.from(i.window.querySelectorAll(t)),this},this.setCloseText=function(e){return i.close.setAttribute("title",e),tab_btns.push(i.close),this},this.addElement=function(e){return i.body.appendChild(e),l=Array.from(i.window.querySelectorAll(t)),this},l=Array.from(i.window.querySelectorAll(t)),document.body.appendChild(i.container)},Dialog.alert=function(e,t,n){return new Promise(function(a){new Dialog(a,n).setTitle(e).setText(t).setSubmitText("OK")})},Dialog.confirm=function(e,t,n){return new Promise(function(a){new Dialog(a,n).setTitle(e).setText(t).setSubmitText("YES").setAbortText("NO")})},Dialog.prompt=function(e,t,n){return new Promise(function(a){var o=document.createElement("input");o.className="dialog-input",new Dialog(function(e){a(!!e&&o.value)},n).setTitle(e).setText(t).setSubmitText("SUBMIT").setAbortText("ABORT").addElement(o)})}}();var chest_panel,skulltula_panel,dungeon_panel,mixins_panel,item_panel,skips_panel,options_panel,mixin_panel,create_mixin_button,ID_CNT=0;const CHILD_ITEM_QUERY=".panel-body > "+[".logic-operator",".logic-element"].join(", .panel-body > "),CHILD_ITEM_QUERY_SCOPE=":scope > "+[".logic-operator",".logic-element"].join(", :scope > ");var logics_panel=document.getElementById("logics-panel").querySelector(".panel-body"),elements_panel=document.getElementById("elements-panel").querySelector(".panel-body");run(),Array.from(document.getElementsByClassName("logic-operator")).forEach(e=>{e.ondragstart=dragNewElement});